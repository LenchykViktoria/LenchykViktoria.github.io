'use strict';

var form = $('#contactForm');
form.on('submit', function (e) {
  e.preventDefault();
});
var servicesTexts = $('.grid-item__text');
servicesTexts.map = [].map;
servicesTexts.forEach = [].forEach;
var arr = servicesTexts.map(function (el) {
  var a = el.innerText.split('');
  if (a.length < 85) return el.innerText;
  var newA = a.slice(0, 85);
  var index = newA.lastIndexOf(' ');
  return newA.slice(0, index).join('') + '...';
});
servicesTexts.forEach(function (el, idx) {
  el.innerText = arr[idx];
});
document.addEventListener('scroll', function () {
  setMenuFixed();
});

var setMenuFixed = function setMenuFixed() {
  var navbar = document.getElementsByClassName('navigation')[0];

  if (window.pageYOffset >= 34) {
    navbar.classList.add('fixed-top');
  } else {
    navbar.classList.remove('fixed-top');
  }
};

$(document).ready(function () {
  $('.partners__list').slick({
    autoplay: true,
    slidesToShow: 6,
    arrows: false
  });
});
var mobileMenuButton = $('.navbar-toggler');
var mobileMenu = $('#navbar');
mobileMenuButton.on('click', function () {
  mobileMenu.toggleClass('open');
});
$('.navigation__link').on('click', function (e) {
  e.preventDefault();
  var top = $($(this).attr('href'))[0].offsetTop;
  window.scrollTo({
    top: top,
    behavior: 'smooth'
  });
});
$('.up').on('click', function () {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
});
var navForm = document.getElementById('navigator');
var addressFrom = document.getElementById('addressFrom');
var addressTo = document.getElementById('addressTo');
var drivingMode = document.getElementById('drivingMode');
var map;
var directionsService;
var directionsDisplay;
var markersArray = [];
navForm.addEventListener('submit', function (e) {
  e.preventDefault();
  clearOverlays();
  var start = addressFrom.value;
  var end = addressTo.value;
  var mode = drivingMode.value;
  start && end ? calcRoute(start, end, mode) : start ? findPoint(start) : end ? findPoint(end) : alert('Enter address');
});

function initMap() {
  directionsService = new google.maps.DirectionsService();
  directionsDisplay = new google.maps.DirectionsRenderer();
  var krem = {
    lat: 49.062785,
    lng: 33.4156805
  };
  map = new google.maps.Map(document.getElementById('map'), {
    zoom: 7,
    center: krem
  });
  directionsDisplay.setMap(map);
}

function findPoint(address) {
  var geocoder = new google.maps.Geocoder();
  var infowindow = new google.maps.InfoWindow();
  geocoder.geocode({
    'address': address
  }, function (results, status) {
    if (status == 'OK') {
      map.zoom = 12;
      map.setCenter(results[0].geometry.location);
      var marker = addMarker(results[0].geometry.location);
      infowindow.setContent(results[0].formatted_address);
      infowindow.open(map, marker);
    } else {
      console.log('Geocode was not successful for the following reason: ' + status);
    }
  });
}

function calcRoute(start, end, drivingMode) {
  directionsDisplay.setMap(map);
  var request = {
    origin: start,
    destination: end,
    travelMode: drivingMode
  };
  directionsService.route(request, function (result, status) {
    if (status == 'OK') {
      directionsDisplay.setDirections(result);
    }
  });
}

function addMarker(location) {
  var marker = new google.maps.Marker({
    position: location,
    map: map
  });
  markersArray.push(marker);
  return marker;
} // Removes the overlays from the map, but keeps them in the array


function clearOverlays() {
  directionsDisplay.setMap(null);

  if (markersArray) {
    for (var i in markersArray) {
      markersArray[i].setMap(null);
    }
  }
} // Shows any overlays currently in the array


function showOverlays() {
  if (markersArray) {
    for (var i in markersArray) {
      markersArray[i].setMap(map);
    }
  }
} // Deletes all markers in the array by removing references to them


function deleteOverlays() {
  if (markersArray) {
    for (var i in markersArray) {
      markersArray[i].setMap(null);
    }

    markersArray.length = 0;
  }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJmb3JtIiwiJCIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic2VydmljZXNUZXh0cyIsIm1hcCIsImZvckVhY2giLCJhcnIiLCJlbCIsImEiLCJpbm5lclRleHQiLCJzcGxpdCIsImxlbmd0aCIsIm5ld0EiLCJzbGljZSIsImluZGV4IiwibGFzdEluZGV4T2YiLCJqb2luIiwiaWR4IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0TWVudUZpeGVkIiwibmF2YmFyIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIndpbmRvdyIsInBhZ2VZT2Zmc2V0IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwicmVhZHkiLCJzbGljayIsImF1dG9wbGF5Iiwic2xpZGVzVG9TaG93IiwiYXJyb3dzIiwibW9iaWxlTWVudUJ1dHRvbiIsIm1vYmlsZU1lbnUiLCJ0b2dnbGVDbGFzcyIsInRvcCIsImF0dHIiLCJvZmZzZXRUb3AiLCJzY3JvbGxUbyIsImJlaGF2aW9yIiwibmF2Rm9ybSIsImdldEVsZW1lbnRCeUlkIiwiYWRkcmVzc0Zyb20iLCJhZGRyZXNzVG8iLCJkcml2aW5nTW9kZSIsImRpcmVjdGlvbnNTZXJ2aWNlIiwiZGlyZWN0aW9uc0Rpc3BsYXkiLCJtYXJrZXJzQXJyYXkiLCJjbGVhck92ZXJsYXlzIiwic3RhcnQiLCJ2YWx1ZSIsImVuZCIsIm1vZGUiLCJjYWxjUm91dGUiLCJmaW5kUG9pbnQiLCJhbGVydCIsImluaXRNYXAiLCJnb29nbGUiLCJtYXBzIiwiRGlyZWN0aW9uc1NlcnZpY2UiLCJEaXJlY3Rpb25zUmVuZGVyZXIiLCJrcmVtIiwibGF0IiwibG5nIiwiTWFwIiwiem9vbSIsImNlbnRlciIsInNldE1hcCIsImFkZHJlc3MiLCJnZW9jb2RlciIsIkdlb2NvZGVyIiwiaW5mb3dpbmRvdyIsIkluZm9XaW5kb3ciLCJnZW9jb2RlIiwicmVzdWx0cyIsInN0YXR1cyIsInNldENlbnRlciIsImdlb21ldHJ5IiwibG9jYXRpb24iLCJtYXJrZXIiLCJhZGRNYXJrZXIiLCJzZXRDb250ZW50IiwiZm9ybWF0dGVkX2FkZHJlc3MiLCJvcGVuIiwiY29uc29sZSIsImxvZyIsInJlcXVlc3QiLCJvcmlnaW4iLCJkZXN0aW5hdGlvbiIsInRyYXZlbE1vZGUiLCJyb3V0ZSIsInJlc3VsdCIsInNldERpcmVjdGlvbnMiLCJNYXJrZXIiLCJwb3NpdGlvbiIsInB1c2giLCJpIiwic2hvd092ZXJsYXlzIiwiZGVsZXRlT3ZlcmxheXMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUNBLElBQU1BLElBQUksR0FBR0MsQ0FBQyxDQUFDLGNBQUQsQ0FBZDtBQUNBRCxJQUFJLENBQUNFLEVBQUwsQ0FBUSxRQUFSLEVBQWtCLFVBQUNDLENBQUQsRUFBTztBQUN4QkEsRUFBQUEsQ0FBQyxDQUFDQyxjQUFGO0FBQ0EsQ0FGRDtBQUlBLElBQU1DLGFBQWEsR0FBR0osQ0FBQyxDQUFDLGtCQUFELENBQXZCO0FBRUFJLGFBQWEsQ0FBQ0MsR0FBZCxHQUFvQixHQUFHQSxHQUF2QjtBQUNBRCxhQUFhLENBQUNFLE9BQWQsR0FBd0IsR0FBR0EsT0FBM0I7QUFFQSxJQUFNQyxHQUFHLEdBQUdILGFBQWEsQ0FBQ0MsR0FBZCxDQUFrQixVQUFBRyxFQUFFLEVBQUk7QUFDbkMsTUFBSUMsQ0FBQyxHQUFHRCxFQUFFLENBQUNFLFNBQUgsQ0FBYUMsS0FBYixDQUFtQixFQUFuQixDQUFSO0FBQ0EsTUFBR0YsQ0FBQyxDQUFDRyxNQUFGLEdBQVcsRUFBZCxFQUFrQixPQUFPSixFQUFFLENBQUNFLFNBQVY7QUFDbEIsTUFBSUcsSUFBSSxHQUFHSixDQUFDLENBQUNLLEtBQUYsQ0FBUSxDQUFSLEVBQVcsRUFBWCxDQUFYO0FBQ0EsTUFBSUMsS0FBSyxHQUFHRixJQUFJLENBQUNHLFdBQUwsQ0FBaUIsR0FBakIsQ0FBWjtBQUNBLFNBQU9ILElBQUksQ0FBQ0MsS0FBTCxDQUFXLENBQVgsRUFBY0MsS0FBZCxFQUFxQkUsSUFBckIsQ0FBMEIsRUFBMUIs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QUFBQSxZQUFZLENBQUNyQyxNQUFiLEdBQXNCLENBQXRCO0FBQ0E7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuY29uc3QgZm9ybSA9ICQoJyNjb250YWN0Rm9ybScpO1xyXG5mb3JtLm9uKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcdFxyXG59KTtcclxuXHJcbmNvbnN0IHNlcnZpY2VzVGV4dHMgPSAkKCcuZ3JpZC1pdGVtX190ZXh0Jyk7XHJcblxyXG5zZXJ2aWNlc1RleHRzLm1hcCA9IFtdLm1hcDtcclxuc2VydmljZXNUZXh0cy5mb3JFYWNoID0gW10uZm9yRWFjaDtcclxuXHJcbmNvbnN0IGFyciA9IHNlcnZpY2VzVGV4dHMubWFwKGVsID0+IHtcclxuXHRsZXQgYSA9IGVsLmlubmVyVGV4dC5zcGxpdCgnJyk7XHJcblx0aWYoYS5sZW5ndGggPCA4NSkgcmV0dXJuIGVsLmlubmVyVGV4dDtcclxuXHRsZXQgbmV3QSA9IGEuc2xpY2UoMCwgODUpO1xyXG5cdGxldCBpbmRleCA9IG5ld0EubGFzdEluZGV4T2YoJyAnKTtcclxuXHRyZXR1cm4gbmV3QS5zbGljZSgwLCBpbmRleCkuam9pbignJykgKyAnLi4uJztcclxufSk7XHJcblxyXG5zZXJ2aWNlc1RleHRzLmZvckVhY2goKGVsLCBpZHgpID0+IHtcclxuXHRlbC5pbm5lclRleHQgPSBhcnJbaWR4XTtcclxufSk7XHJcblxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xyXG5cdHNldE1lbnVGaXhlZCgpO1xyXG59KTtcclxuXHJcblxyXG5jb25zdCBzZXRNZW51Rml4ZWQgPSAoKSA9PiB7XHJcblx0Y29uc3QgbmF2YmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbmF2aWdhdGlvbicpWzBdO1x0XHJcblx0aWYod2luZG93LnBhZ2VZT2Zmc2V0ID49IDM0KXtcclxuXHRcdG5hdmJhci5jbGFzc0xpc3QuYWRkKCdmaXhlZC10b3AnKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0bmF2YmFyLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkLXRvcCcpO1xyXG5cdH1cclxufTtcclxuXHJcblxyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuICAkKCcucGFydG5lcnNfX2xpc3QnKS5zbGljayh7XHJcbiAgXHRhdXRvcGxheTogdHJ1ZSxcclxuICBcdHNsaWRlc1RvU2hvdzogNixcclxuICBcdGFycm93czogZmFsc2VcclxuICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBtb2JpbGVNZW51QnV0dG9uID0gJCgnLm5hdmJhci10b2dnbGVyJyk7XHJcblx0XHRjb25zdCBtb2JpbGVNZW51ID0gJCgnI25hdmJhcicpO1xyXG5cclxuXHRcdG1vYmlsZU1lbnVCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdG1vYmlsZU1lbnUudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQoJy5uYXZpZ2F0aW9uX19saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0Y29uc3QgdG9wID0gJCgkKHRoaXMpLmF0dHIoJ2hyZWYnKSlbMF0ub2Zmc2V0VG9wO1xyXG5cdFx0XHR3aW5kb3cuc2Nyb2xsVG8oe1xyXG5cdFx0XHRcdHRvcDogdG9wLFxyXG5cdFx0XHRcdGJlaGF2aW9yOiAnc21vb3RoJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQoJy51cCcpLm9uKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0d2luZG93LnNjcm9sbFRvKHtcclxuXHRcdFx0XHR0b3A6IDAsXHJcblx0XHRcdFx0YmVoYXZpb3I6ICdzbW9vdGgnXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cclxuY29uc3QgbmF2Rm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZpZ2F0b3InKTtcclxuY29uc3QgYWRkcmVzc0Zyb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkcmVzc0Zyb20nKTtcclxuY29uc3QgYWRkcmVzc1RvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZHJlc3NUbycpO1xyXG5jb25zdCBkcml2aW5nTW9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkcml2aW5nTW9kZScpO1xyXG5sZXQgbWFwO1xyXG5sZXQgZGlyZWN0aW9uc1NlcnZpY2U7XHJcbmxldCBkaXJlY3Rpb25zRGlzcGxheTtcclxuY29uc3QgbWFya2Vyc0FycmF5ID0gW107XHJcblxyXG5uYXZGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNsZWFyT3ZlcmxheXMoKTtcclxuXHRjb25zdCBzdGFydCA9IGFkZHJlc3NGcm9tLnZhbHVlO1xyXG5cdGNvbnN0IGVuZCA9IGFkZHJlc3NUby52YWx1ZTtcclxuXHRjb25zdCBtb2RlID0gZHJpdmluZ01vZGUudmFsdWU7XHJcblx0c3RhcnQgJiYgZW5kID8gY2FsY1JvdXRlKHN0YXJ0LCBlbmQsIG1vZGUpIDogc3RhcnQgPyBmaW5kUG9pbnQoc3RhcnQpIDogIGVuZCA/IGZpbmRQb2ludChlbmQpIDogYWxlcnQoJ0VudGVyIGFkZHJlc3MnKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBpbml0TWFwKCkge1xyXG5cdGRpcmVjdGlvbnNTZXJ2aWNlID0gbmV3IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNTZXJ2aWNlKCk7XHJcblx0ZGlyZWN0aW9uc0Rpc3BsYXkgPSBuZXcgZ29vZ2xlLm1hcHMuRGlyZWN0aW9uc1JlbmRlcmVyKCk7XHJcblx0Y29uc3Qga3JlbSA9IHtsYXQ6IDQ5LjA2Mjc4NSwgbG5nOiAzMy40MTU2ODA1fTtcclxuXHRtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge3pvb206IDcsIGNlbnRlcjoga3JlbX0pO1xyXG5cdGRpcmVjdGlvbnNEaXNwbGF5LnNldE1hcChtYXApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kUG9pbnQoYWRkcmVzcykge1xyXG5cdGNvbnN0IGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XHJcblx0Y29uc3QgaW5mb3dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93O1xyXG5cdGdlb2NvZGVyLmdlb2NvZGUoIHsgJ2FkZHJlc3MnOiBhZGRyZXNzfSwgZnVuY3Rpb24ocmVzdWx0cywgc3RhdHVzKSB7XHJcblx0XHRpZiAoc3RhdHVzID09ICdPSycpIHtcclxuXHRcdFx0bWFwLnpvb20gPSAxMjtcclxuXHRcdFx0bWFwLnNldENlbnRlcihyZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uKTtcclxuXHRcdFx0Y29uc3QgbWFya2VyID0gYWRkTWFya2VyKHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24pXHJcblx0XHRcdGluZm93aW5kb3cuc2V0Q29udGVudChyZXN1bHRzWzBdLmZvcm1hdHRlZF9hZGRyZXNzKTtcclxuXHRcdFx0aW5mb3dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdHZW9jb2RlIHdhcyBub3Qgc3VjY2Vzc2Z1bCBmb3IgdGhlIGZvbGxvd2luZyByZWFzb246ICcgKyBzdGF0dXMpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxjUm91dGUoc3RhcnQsIGVuZCwgZHJpdmluZ01vZGUpIHtcclxuXHRkaXJlY3Rpb25zRGlzcGxheS5zZXRNYXAobWFwKTtcclxuXHR2YXIgcmVxdWVzdCA9IHtcclxuXHRcdG9yaWdpbjogc3RhcnQsXHJcblx0XHRkZXN0aW5hdGlvbjogZW5kLFxyXG5cdFx0dHJhdmVsTW9kZTogZHJpdmluZ01vZGVcclxuXHR9O1xyXG5cdGRpcmVjdGlvbnNTZXJ2aWNlLnJvdXRlKHJlcXVlc3QsIGZ1bmN0aW9uKHJlc3VsdCwgc3RhdHVzKSB7XHJcblx0XHRpZiAoc3RhdHVzID09ICdPSycpIHtcclxuXHRcdFx0ZGlyZWN0aW9uc0Rpc3BsYXkuc2V0RGlyZWN0aW9ucyhyZXN1bHQpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRNYXJrZXIobG9jYXRpb24pIHtcclxuXHRjb25zdCBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuXHRcdHBvc2l0aW9uOiBsb2NhdGlvbixcclxuXHRcdG1hcDogbWFwXHJcblx0fSk7XHJcblx0bWFya2Vyc0FycmF5LnB1c2gobWFya2VyKTtcclxuXHRyZXR1cm4gbWFya2VyO1xyXG59XHJcblxyXG4vLyBSZW1vdmVzIHRoZSBvdmVybGF5cyBmcm9tIHRoZSBtYXAsIGJ1dCBrZWVwcyB0aGVtIGluIHRoZSBhcnJheVxyXG5mdW5jdGlvbiBjbGVhck92ZXJsYXlzKCkge1xyXG5cdGRpcmVjdGlvbnNEaXNwbGF5LnNldE1hcChudWxsKTtcclxuXHRpZiAobWFya2Vyc0FycmF5KSB7XHJcblx0XHRmb3IgKGxldCBpIGluIG1hcmtlcnNBcnJheSkge1xyXG5cdFx0XHRtYXJrZXJzQXJyYXlbaV0uc2V0TWFwKG51bGwpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuLy8gU2hvd3MgYW55IG92ZXJsYXlzIGN1cnJlbnRseSBpbiB0aGUgYXJyYXlcclxuZnVuY3Rpb24gc2hvd092ZXJsYXlzKCkge1xyXG5cdGlmIChtYXJrZXJzQXJyYXkpIHtcclxuXHRcdGZvciAobGV0IGkgaW4gbWFya2Vyc0FycmF5KSB7XHJcblx0XHRcdG1hcmtlcnNBcnJheVtpXS5zZXRNYXAobWFwKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbi8vIERlbGV0ZXMgYWxsIG1hcmtlcnMgaW4gdGhlIGFycmF5IGJ5IHJlbW92aW5nIHJlZmVyZW5jZXMgdG8gdGhlbVxyXG5mdW5jdGlvbiBkZWxldGVPdmVybGF5cygpIHtcclxuXHRpZiAobWFya2Vyc0FycmF5KSB7XHJcblx0XHRmb3IgKGxldCBpIGluIG1hcmtlcnNBcnJheSkge1xyXG5cdFx0XHRtYXJrZXJzQXJyYXlbaV0uc2V0TWFwKG51bGwpO1xyXG5cdFx0fVxyXG5cdFx0bWFya2Vyc0FycmF5Lmxlbmd0aCA9IDA7XHJcblx0fVxyXG59XHJcblx0XHQiXSwiZmlsZSI6InNjcmlwdC5qcyJ9
